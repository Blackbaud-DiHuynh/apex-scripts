Execute Anonymous

================================

String pledgeHTML = '<label for="searchOwner_sidebar">Limit to items I own </label>'
+'<label for="Name"><span class="requiredMark">*</span>Pledge Name</label>'
+'<label for="00Nj0000002D7T1"><span class="requiredMark">*</span>Donation Type</label>'
+'<label for="CF00Nj0000002D7SJ"><span class="requiredMark">*</span>Account</label>'
+'<label for="00Nj0000002D7Sz">Transaction Type</label>'
+'<label for="00Nj0000002D7Sx"><span class="requiredMark">*</span>Start Date</label>'
+'<label for="00Nj0000002D7Sd">Original Pledge Amount</label>'
+'<label for="00Nj0000002D7Sl">Pledge Status</label>'
+'<label for="CF00Nj0000002D7T0">Tribute</label>'
+'<label for="00Nj0000002D7Si"><span class="requiredMark">*</span>Pledge Amount</label>'
+'<label for="CF00Nj0000002D7Sf">Parent Donation</label>'
+'<label for="00Nj0000002D7SM">Benefit Value</label>'
+'<label for="00Nj0000002D7Sn">Posted</label>'
+'<label for="00Nj0000002D7Sc"><span class="requiredMark">*</span>Number of Payments</label>'
+'<label for="00Nj0000002D7Sm">Posted Date</label>'
+'<label for="CF00Nj0000002D7SN"><span class="requiredMark">*</span>Campaign ID</label>'
+'<label for="00Nj0000002D7Sw">Reversed</label>'
+'<label for="CF00Nj0000002D7So">Primary Classification</label>'
+'<label for="00Nj0000002D7SQ">Description</label>'
+'<label for="00Nj0000002D7Xv">Payment Type</label>'
+'<label for="00Nj0000002D7Xo">Credit Card Type</label>'
+'<label for="00Nj0000002D7Xz">Last Payment Date</label>'
+'<label for="00Nj0000002D7Xr">Last Payment Amount</label>'
+'<label for="00Nj0000002D7Sb">Convio Luminate Online Next Payment Date</label>'
+'<label for="00Nj0000002D7Xt">Next Payment Amount</label>'
+'<label for="00Nj0000002D7Xs">Last Payment Status</label>'
+'<label for="00Nj0000002D7T3">Convio Luminate Online Gift Origin</label>'
+'<label for="00Nj0000002D7Sh">Payments Received</label>'
+'<label for="00Nj0000002D7SL">Amount Received</label>'
+'<label for="00Nj0000002D7T2">Write-In Designation</label>'
+'<label for="CF00Nj0000002D7SO"><span class="requiredMark">*</span>Donor</label>'
+'<label for="00Nj0000002D7Sa">Honor/Memorial Type</label>'
+'<label for="00Nj0000002D7ST">Honoree Name</label>'
+'<label for="00Nj0000002D7SY">Honor/Memorial Notification Method</label>'
+'<label for="00Nj0000002D7SZ">Honor/Memorial Person(s) to Notify</label>'
+'<label for="00Nj0000002D7SV">Honor/Memorial Notification Address</label>'
+'<label for="00Nj0000002D7SX">Honor/Memorial Notification Email</label>'
+'<label for="00Nj0000002D7SW">Honor/Memorial Notification Date</label>'
+'<label for="00Nj0000002D7SU">Honor/Memorial Message</label>';


UrlBuilder url = new UrlBuilder();

url.buildLabelToFieldMap(pledgeHTML);
url.fieldMap = Pledge__c.SObjectType.getDescribe().fields.getMap();
String recordId = '003o000000BWJMb';

Contact con = [SELECT Id, Name, AccountId, Primary_Engagement_Channel__c, 
								Primary_Engagement_Channel__r.Name 
							FROM Contact 
							WHERE Id = :recordId];
Account account = [SELECT Id, Name FROM Account WHERE Id=:con.AccountId];

PageReference ans = url.name('[Set by workflow rule]')
	.startDate(Date.today())
	.pledgeStatus('Active')
	.returnUrl(recordId)
	.accountId(con.AccountId)
	.accountName(account.Name)
	.contactID(con.id)
	.contactName(con.Name)
	.sustainingGiftDonationType(Label.Individual_Gift)
	.primaryEngagementId(con.Primary_Engagement_Channel__c)
	.primaryEngagementName(con.Primary_Engagement_Channel__r.Name)
	.build();

System.debug('URL is ' + ans.getUrl());

























================================

31.0 APEX_CODE,DEBUG;APEX_PROFILING,DEBUG;CALLOUT,INFO;DB,INFO;VALIDATION,INFO;WORKFLOW,INFO
Execute Anonymous: String pledgeHTML = '<label for="searchOwner_sidebar">Limit to items I own </label>'
Execute Anonymous: +'<label for="Name"><span class="requiredMark">*</span>Pledge Name</label>'
Execute Anonymous: +'<label for="00Nj0000002D7T1"><span class="requiredMark">*</span>Donation Type</label>'
Execute Anonymous: +'<label for="CF00Nj0000002D7SJ"><span class="requiredMark">*</span>Account</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Sz">Transaction Type</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Sx"><span class="requiredMark">*</span>Start Date</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Sd">Original Pledge Amount</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Sl">Pledge Status</label>'
Execute Anonymous: +'<label for="CF00Nj0000002D7T0">Tribute</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Si"><span class="requiredMark">*</span>Pledge Amount</label>'
Execute Anonymous: +'<label for="CF00Nj0000002D7Sf">Parent Donation</label>'
Execute Anonymous: +'<label for="00Nj0000002D7SM">Benefit Value</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Sn">Posted</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Sc"><span class="requiredMark">*</span>Number of Payments</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Sm">Posted Date</label>'
Execute Anonymous: +'<label for="CF00Nj0000002D7SN"><span class="requiredMark">*</span>Campaign ID</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Sw">Reversed</label>'
Execute Anonymous: +'<label for="CF00Nj0000002D7So">Primary Classification</label>'
Execute Anonymous: +'<label for="00Nj0000002D7SQ">Description</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Xv">Payment Type</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Xo">Credit Card Type</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Xz">Last Payment Date</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Xr">Last Payment Amount</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Sb">Convio Luminate Online Next Payment Date</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Xt">Next Payment Amount</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Xs">Last Payment Status</label>'
Execute Anonymous: +'<label for="00Nj0000002D7T3">Convio Luminate Online Gift Origin</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Sh">Payments Received</label>'
Execute Anonymous: +'<label for="00Nj0000002D7SL">Amount Received</label>'
Execute Anonymous: +'<label for="00Nj0000002D7T2">Write-In Designation</label>'
Execute Anonymous: +'<label for="CF00Nj0000002D7SO"><span class="requiredMark">*</span>Donor</label>'
Execute Anonymous: +'<label for="00Nj0000002D7Sa">Honor/Memorial Type</label>'
Execute Anonymous: +'<label for="00Nj0000002D7ST">Honoree Name</label>'
Execute Anonymous: +'<label for="00Nj0000002D7SY">Honor/Memorial Notification Method</label>'
Execute Anonymous: +'<label for="00Nj0000002D7SZ">Honor/Memorial Person(s) to Notify</label>'
Execute Anonymous: +'<label for="00Nj0000002D7SV">Honor/Memorial Notification Address</label>'
Execute Anonymous: +'<label for="00Nj0000002D7SX">Honor/Memorial Notification Email</label>'
Execute Anonymous: +'<label for="00Nj0000002D7SW">Honor/Memorial Notification Date</label>'
Execute Anonymous: +'<label for="00Nj0000002D7SU">Honor/Memorial Message</label>';
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: UrlBuilder url = new UrlBuilder();
Execute Anonymous: 
Execute Anonymous: url.buildLabelToFieldMap(pledgeHTML);
Execute Anonymous: url.fieldMap = Pledge__c.SObjectType.getDescribe().fields.getMap();
Execute Anonymous: String recordId = '003o000000BWJMb';
Execute Anonymous: 
Execute Anonymous: Contact con = [SELECT Id, Name, AccountId, Primary_Engagement_Channel__c, 
Execute Anonymous: 								Primary_Engagement_Channel__r.Name 
Execute Anonymous: 							FROM Contact 
Execute Anonymous: 							WHERE Id = :recordId];
Execute Anonymous: Account account = [SELECT Id, Name FROM Account WHERE Id=:con.AccountId];
Execute Anonymous: 
Execute Anonymous: PageReference ans = url.name('[Set by workflow rule]')
Execute Anonymous: 	.startDate(Date.today())
Execute Anonymous: 	.pledgeStatus('Active')
Execute Anonymous: 	.returnUrl(recordId)
Execute Anonymous: 	.accountId(con.AccountId)
Execute Anonymous: 	.accountName(account.Name)
Execute Anonymous: 	.contactID(con.id)
Execute Anonymous: 	.contactName(con.Name)
Execute Anonymous: 	.sustainingGiftDonationType(Label.Individual_Gift)
Execute Anonymous: 	.primaryEngagementId(con.Primary_Engagement_Channel__c)
Execute Anonymous: 	.primaryEngagementName(con.Primary_Engagement_Channel__r.Name)
Execute Anonymous: 	.build();
Execute Anonymous: 
Execute Anonymous: System.debug('URL is ' + ans.getUrl());
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: 
14:42:29.840 (840727010)|EXECUTION_STARTED
14:42:29.840 (840737691)|CODE_UNIT_STARTED|[EXTERNAL]|execute_anonymous_apex
14:42:29.847 (847207492)|METHOD_ENTRY|[1]|01po0000003RBmT|UrlBuilder.UrlBuilder()
14:42:29.847 (847220058)|METHOD_EXIT|[1]|UrlBuilder
14:42:29.847 (847375142)|CONSTRUCTOR_ENTRY|[42]|01po0000003RBmT|<init>()
14:42:29.847 (847493784)|CONSTRUCTOR_EXIT|[42]|01po0000003RBmT|<init>()
14:42:29.847 (847582519)|METHOD_ENTRY|[44]|01po0000003RBmT|UrlBuilder.buildLabelToFieldMap(String)
14:42:29.850 (850934118)|METHOD_EXIT|[44]|01po0000003RBmT|UrlBuilder.buildLabelToFieldMap(String)
14:42:29.852 (852915857)|SOQL_EXECUTE_BEGIN|[48]|Aggregations:0|SELECT Id, Name, AccountId, Primary_Engagement_Channel__c, Primary_Engagement_Channel__r.Name FROM Contact WHERE Id = :tmpVar1
14:42:29.859 (859320651)|SOQL_EXECUTE_END|[48]|Rows:1
14:42:29.859 (859631802)|SOQL_EXECUTE_BEGIN|[52]|Aggregations:0|SELECT Id, Name FROM Account WHERE Id = :tmpVar1
14:42:29.862 (862887700)|SOQL_EXECUTE_END|[52]|Rows:1
14:42:29.863 (863054314)|METHOD_ENTRY|[54]|01po0000003RBmT|UrlBuilder.name(String)
14:42:29.863 (863089221)|METHOD_ENTRY|[235]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.863 (863306665)|METHOD_EXIT|[235]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.863 (863314567)|METHOD_EXIT|[54]|01po0000003RBmT|UrlBuilder.name(String)
14:42:29.863 (863395993)|METHOD_ENTRY|[54]|01po0000003RBmT|UrlBuilder.startDate(Date)
14:42:29.863 (863414308)|METHOD_ENTRY|[250]|01po0000003RBmT|UrlBuilder.getFieldId(String)
14:42:29.864 (864154726)|METHOD_EXIT|[250]|01po0000003RBmT|UrlBuilder.getFieldId(String)
14:42:29.893 (893886591)|METHOD_ENTRY|[1]|01po0000000dllI|Utils.Utils()
14:42:29.898 (898331505)|METHOD_EXIT|[1]|Utils
14:42:29.898 (898365386)|METHOD_ENTRY|[250]|01po0000000dllI|Utils.toLocaleDate(Date)
14:42:29.898 (898545715)|METHOD_EXIT|[250]|01po0000000dllI|Utils.toLocaleDate(Date)
14:42:29.898 (898559705)|METHOD_ENTRY|[250]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.898 (898629050)|METHOD_EXIT|[250]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.898 (898636728)|METHOD_EXIT|[54]|01po0000003RBmT|UrlBuilder.startDate(Date)
14:42:29.898 (898696889)|METHOD_ENTRY|[54]|01po0000003RBmT|UrlBuilder.pledgeStatus(String)
14:42:29.898 (898712676)|METHOD_ENTRY|[210]|01po0000003RBmT|UrlBuilder.getFieldId(String)
14:42:29.899 (899045032)|METHOD_EXIT|[210]|01po0000003RBmT|UrlBuilder.getFieldId(String)
14:42:29.899 (899055713)|METHOD_ENTRY|[210]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.899 (899107876)|METHOD_EXIT|[210]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.899 (899114361)|METHOD_EXIT|[54]|01po0000003RBmT|UrlBuilder.pledgeStatus(String)
14:42:29.899 (899172062)|METHOD_ENTRY|[54]|01po0000003RBmT|UrlBuilder.returnURL(Id)
14:42:29.899 (899241720)|METHOD_ENTRY|[104]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.899 (899298507)|METHOD_EXIT|[104]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.899 (899342943)|METHOD_ENTRY|[105]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.899 (899391603)|METHOD_EXIT|[105]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.899 (899398129)|METHOD_EXIT|[54]|01po0000003RBmT|UrlBuilder.returnURL(Id)
14:42:29.899 (899447145)|METHOD_ENTRY|[54]|01po0000003RBmT|UrlBuilder.accountId(Id)
14:42:29.899 (899466963)|METHOD_ENTRY|[110]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.899 (899520849)|METHOD_EXIT|[110]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.899 (899527368)|METHOD_EXIT|[54]|01po0000003RBmT|UrlBuilder.accountId(Id)
14:42:29.899 (899593460)|METHOD_ENTRY|[54]|01po0000003RBmT|UrlBuilder.accountName(String)
14:42:29.899 (899608741)|METHOD_ENTRY|[115]|01po0000003RBmT|UrlBuilder.getFieldId(String)
14:42:29.899 (899791156)|METHOD_EXIT|[115]|01po0000003RBmT|UrlBuilder.getFieldId(String)
14:42:29.899 (899800492)|METHOD_ENTRY|[115]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.899 (899849359)|METHOD_EXIT|[115]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.899 (899855697)|METHOD_EXIT|[54]|01po0000003RBmT|UrlBuilder.accountName(String)
14:42:29.899 (899916835)|METHOD_ENTRY|[54]|01po0000003RBmT|UrlBuilder.contactID(Id)
14:42:29.899 (899931910)|METHOD_ENTRY|[145]|01po0000003RBmT|UrlBuilder.getFieldId(String)
14:42:29.900 (900096913)|METHOD_EXIT|[145]|01po0000003RBmT|UrlBuilder.getFieldId(String)
14:42:29.900 (900109040)|METHOD_ENTRY|[145]|01po0000003RBmT|UrlBuilder.lookupId()
14:42:29.900 (900119996)|METHOD_EXIT|[145]|01po0000003RBmT|UrlBuilder.lookupId()
14:42:29.900 (900132114)|METHOD_ENTRY|[145]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.900 (900179774)|METHOD_EXIT|[145]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.900 (900185966)|METHOD_EXIT|[54]|01po0000003RBmT|UrlBuilder.contactID(Id)
14:42:29.900 (900249998)|METHOD_ENTRY|[54]|01po0000003RBmT|UrlBuilder.contactName(String)
14:42:29.900 (900267723)|METHOD_ENTRY|[140]|01po0000003RBmT|UrlBuilder.getFieldId(String)
14:42:29.900 (900348097)|METHOD_EXIT|[140]|01po0000003RBmT|UrlBuilder.getFieldId(String)
14:42:29.900 (900356321)|METHOD_ENTRY|[140]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.900 (900403607)|METHOD_EXIT|[140]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.900 (900409743)|METHOD_EXIT|[54]|01po0000003RBmT|UrlBuilder.contactName(String)
14:42:29.900 (900480128)|METHOD_ENTRY|[54]|01po0000003RBmT|UrlBuilder.sustainingGiftDonationType(String)
14:42:29.900 (900494938)|METHOD_ENTRY|[220]|01po0000003RBmT|UrlBuilder.getFieldId(String)
14:42:29.900 (900632909)|METHOD_EXIT|[220]|01po0000003RBmT|UrlBuilder.getFieldId(String)
14:42:29.900 (900641547)|METHOD_ENTRY|[220]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.900 (900690174)|METHOD_EXIT|[220]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.900 (900696783)|METHOD_EXIT|[54]|01po0000003RBmT|UrlBuilder.sustainingGiftDonationType(String)
14:42:29.900 (900757833)|METHOD_ENTRY|[54]|01po0000003RBmT|UrlBuilder.primaryEngagementId(Id)
14:42:29.900 (900776631)|METHOD_ENTRY|[190]|01po0000003RBmT|UrlBuilder.getFieldId(String)
14:42:29.900 (900946952)|METHOD_EXIT|[190]|01po0000003RBmT|UrlBuilder.getFieldId(String)
14:42:29.900 (900954111)|METHOD_ENTRY|[190]|01po0000003RBmT|UrlBuilder.lookupId()
14:42:29.900 (900961390)|METHOD_EXIT|[190]|01po0000003RBmT|UrlBuilder.lookupId()
14:42:29.900 (900973828)|METHOD_ENTRY|[190]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.901 (901021401)|METHOD_EXIT|[190]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.901 (901028705)|METHOD_EXIT|[54]|01po0000003RBmT|UrlBuilder.primaryEngagementId(Id)
14:42:29.901 (901170499)|METHOD_ENTRY|[54]|01po0000003RBmT|UrlBuilder.primaryEngagementName(String)
14:42:29.901 (901184237)|METHOD_ENTRY|[195]|01po0000003RBmT|UrlBuilder.getFieldId(String)
14:42:29.901 (901259860)|METHOD_EXIT|[195]|01po0000003RBmT|UrlBuilder.getFieldId(String)
14:42:29.901 (901267859)|METHOD_ENTRY|[195]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.901 (901321782)|METHOD_EXIT|[195]|01po0000003RBmT|UrlBuilder.addUrlArgument(String, String)
14:42:29.901 (901328290)|METHOD_EXIT|[54]|01po0000003RBmT|UrlBuilder.primaryEngagementName(String)
14:42:29.901 (901364956)|METHOD_ENTRY|[54]|01po0000003RBmT|UrlBuilder.build()
14:42:29.901 (901554505)|METHOD_EXIT|[54]|01po0000003RBmT|UrlBuilder.build()
14:42:29.901 (901632096)|USER_DEBUG|[67]|DEBUG|URL is Name=%5BSet+by+workflow+rule%5D&00Nj0000002D7Sx=2%2F17%2F2015&00Nj0000002D7Sl=Active&retURL=%2F003o000000BWJMbAAP&cancelURL=%2F003o000000BWJMbAAP&accid=001o000000BctE4AAJ&CF00Nj0000002D7SJ=Aaron+Brooks+Household&CF00Nj0000002D7SO_lkid=003o000000BWJMbAAP&CF00Nj0000002D7SO=Aaron+Brooks&00Nj0000002D7T1=Individual+Gift&CF00Nj0000002D7So_lkid=a0Eo0000003t8YUEAY&CF00Nj0000002D7So=Default+Classification
14:42:30.696 (901686977)|CUMULATIVE_LIMIT_USAGE
14:42:30.696|LIMIT_USAGE_FOR_NS|(default)|
  Number of SOQL queries: 2 out of 100
  Number of query rows: 2 out of 50000
  Number of SOSL queries: 0 out of 20
  Number of DML statements: 0 out of 150
  Number of DML rows: 0 out of 10000
  Maximum CPU time: 0 out of 10000
  Maximum heap size: 0 out of 6000000
  Number of callouts: 0 out of 100
  Number of Email Invocations: 0 out of 10
  Number of future calls: 0 out of 50
  Number of queueable jobs added to the queue: 0 out of 50
  Number of Mobile Apex push calls: 0 out of 10

14:42:30.696|CUMULATIVE_LIMIT_USAGE_END

14:42:29.901 (901718359)|CODE_UNIT_FINISHED|execute_anonymous_apex
14:42:29.903 (903653649)|EXECUTION_FINISHED