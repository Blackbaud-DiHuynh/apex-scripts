Execute Anonymous

================================


Map<Date, Decimal> amountsByMonthMap = new Map<Date, Decimal>{
    Date.newInstance(2014, 1,1) => 100.00,
    Date.newInstance(2014, 2,1) => 100.00,
    Date.newInstance(2015, 3,1) => 100.00,
    Date.newInstance(2015, 4,1) => 100.00
};

Set<Date> displayMonths = new Set<Date>{
    Date.newInstance(2015, 1,1),
    Date.newInstance(2015, 2,1),
    Date.newInstance(2015, 3,1),
    Date.newInstance(2015, 4,1),
    Date.newInstance(2015, 5,1),
    Date.newInstance(2015, 6,1)
};

// the lenght of this list will be from min(sortedKeySet[0], displayMonths[0])
// to max (sortedKeySet[sortedKeySet.size()-1], displayMonths[displayMonths.size()-1]
Set<Date> combinedList = new Set<Date>();

combinedList.addAll(amountsByMonthMap.keyset());
combinedList.addAll(displayMonths);

List<Date> combined = new List<Date>();
combined.addAll(combinedList);
combined.sort();

System.debug('combined: ' + combined);

Decimal cummulativeAmounts = 0;
List<Decimal> amountsRaisedByDisplayMonth = new List<Decimal>();

for (Date currentMonth : combined){
    if (amountsByMonthMap.keySet().contains(currentMonth)){
        cummulativeAmounts += amountsByMonthMap.get(currentMonth);
    }
    if (displayMonths.contains(currentMonth)){
        amountsRaisedByDisplayMonth.add(cummulativeAmounts);
    }
}


System.debug(amountsRaisedByDisplayMonth);

================================

31.0 APEX_CODE,DEBUG;APEX_PROFILING,DEBUG;CALLOUT,INFO;DB,INFO;VALIDATION,INFO;WORKFLOW,INFO
Execute Anonymous: 
Execute Anonymous: Map<Date, Decimal> amountsByMonthMap = new Map<Date, Decimal>{
Execute Anonymous:     Date.newInstance(2014, 1,1) => 100.00,
Execute Anonymous:     Date.newInstance(2014, 2,1) => 100.00,
Execute Anonymous:     Date.newInstance(2015, 3,1) => 100.00,
Execute Anonymous:     Date.newInstance(2015, 4,1) => 100.00
Execute Anonymous: };
Execute Anonymous: 
Execute Anonymous: Set<Date> displayMonths = new Set<Date>{
Execute Anonymous:     Date.newInstance(2015, 1,1),
Execute Anonymous:     Date.newInstance(2015, 2,1),
Execute Anonymous:     Date.newInstance(2015, 3,1),
Execute Anonymous:     Date.newInstance(2015, 4,1),
Execute Anonymous:     Date.newInstance(2015, 5,1),
Execute Anonymous:     Date.newInstance(2015, 6,1)
Execute Anonymous: };
Execute Anonymous: 
Execute Anonymous: // the lenght of this list will be from min(sortedKeySet[0], displayMonths[0])
Execute Anonymous: // to max (sortedKeySet[sortedKeySet.size()-1], displayMonths[displayMonths.size()-1]
Execute Anonymous: Set<Date> combinedList = new Set<Date>();
Execute Anonymous: 
Execute Anonymous: combinedList.addAll(amountsByMonthMap.keyset());
Execute Anonymous: combinedList.addAll(displayMonths);
Execute Anonymous: 
Execute Anonymous: List<Date> combined = new List<Date>();
Execute Anonymous: combined.addAll(combinedList);
Execute Anonymous: combined.sort();
Execute Anonymous: 
Execute Anonymous: System.debug('combined: ' + combined);
Execute Anonymous: 
Execute Anonymous: Decimal cummulativeAmounts = 0;
Execute Anonymous: List<Decimal> amountsRaisedByDisplayMonth = new List<Decimal>();
Execute Anonymous: 
Execute Anonymous: for (Date currentMonth : combined){
Execute Anonymous:     if (amountsByMonthMap.keySet().contains(currentMonth)){
Execute Anonymous:         cummulativeAmounts += amountsByMonthMap.get(currentMonth);
Execute Anonymous:     }
Execute Anonymous:     if (displayMonths.contains(currentMonth)){
Execute Anonymous:         amountsRaisedByDisplayMonth.add(cummulativeAmounts);
Execute Anonymous:     }
Execute Anonymous: }
Execute Anonymous: 
Execute Anonymous: 
Execute Anonymous: System.debug(amountsRaisedByDisplayMonth);
06:33:42.030 (30069686)|EXECUTION_STARTED
06:33:42.030 (30079366)|CODE_UNIT_STARTED|[EXTERNAL]|execute_anonymous_apex
06:33:42.031 (31590031)|USER_DEBUG|[29]|DEBUG|combined: (2014-01-01 00:00:00, 2014-02-01 00:00:00, 2015-01-01 00:00:00, 2015-02-01 00:00:00, 2015-03-01 00:00:00, 2015-04-01 00:00:00, 2015-05-01 00:00:00, 2015-06-01 00:00:00)
06:33:42.032 (32770595)|USER_DEBUG|[44]|DEBUG|(200.00, 200.00, 300.00, 400.00, 400.00, 400.00)
06:33:42.053 (32805762)|CUMULATIVE_LIMIT_USAGE
06:33:42.053|LIMIT_USAGE_FOR_NS|(default)|
  Number of SOQL queries: 0 out of 100
  Number of query rows: 0 out of 50000
  Number of SOSL queries: 0 out of 20
  Number of DML statements: 0 out of 150
  Number of DML rows: 0 out of 10000
  Maximum CPU time: 0 out of 10000
  Maximum heap size: 0 out of 6000000
  Number of callouts: 0 out of 100
  Number of Email Invocations: 0 out of 10
  Number of future calls: 0 out of 50
  Number of queueable jobs added to the queue: 0 out of 50
  Number of Mobile Apex push calls: 0 out of 10

06:33:42.053|CUMULATIVE_LIMIT_USAGE_END

06:33:42.032 (32828479)|CODE_UNIT_FINISHED|execute_anonymous_apex
06:33:42.034 (34163593)|EXECUTION_FINISHED